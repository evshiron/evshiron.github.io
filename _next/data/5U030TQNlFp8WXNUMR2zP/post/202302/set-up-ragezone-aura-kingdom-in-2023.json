{"pageProps":{"postData":{"yyyymm":"202302","name":"set-up-ragezone-aura-kingdom-in-2023","contentHtml":"<h1 id=\"set-up-ragezone-aura-kingdom-in-2023\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#set-up-ragezone-aura-kingdom-in-2023\"><span class=\"icon icon-link\"></span></a>Set up RaGEZONE Aura Kingdom in 2023</h1>\n<p>Recently I become nostalgic and look into Aura Kingdom stuff, after searching about it for a while, it seems quite easy to set up a local version for some quick experience.</p>\n<p>Although there are missing caveats, I manage to do it and want to write down the steps for future use.</p>\n<p>Hope it helps you too.</p>\n<h2 id=\"table-of-contents\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#table-of-contents\"><span class=\"icon icon-link\"></span></a>Table of contents</h2>\n<ul>\n<li><a href=\"#download-prerequisite-files\">Download prerequisite files</a></li>\n<li><a href=\"#download-and-install-virtualbox\">Download and install VirtualBox</a></li>\n<li><a href=\"#create-debian-9-stretch-virtualbox-vm\">Create Debian 9 (stretch) VirtualBox VM</a></li>\n<li><a href=\"#update-vm-network-to-bridged\">Update VM network to Bridged</a></li>\n<li><a href=\"#run-one-click-installer-in-vm\">Run one click installer in VM</a></li>\n<li><a href=\"#fix-server-data\">Fix server data</a></li>\n<li><a href=\"#create-user-account\">Create user account</a></li>\n<li><a href=\"#start-server\">Start server</a></li>\n<li><a href=\"#start-client\">Start client</a></li>\n<li><a href=\"#gm-commands\">GM commands</a></li>\n<li><a href=\"#fix-item-mall\">Fix Item Mall</a></li>\n<li><a href=\"#fix-fortune-bag\">Fix Fortune Bag</a></li>\n<li><a href=\"#fix-dress-room\">Fix Dress Room</a></li>\n<li><a href=\"#links\">Links</a></li>\n<li><a href=\"#q--a\">Q &#x26; A</a></li>\n</ul>\n<h2 id=\"download-prerequisite-files\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#download-prerequisite-files\"><span class=\"icon icon-link\"></span></a>Download prerequisite files</h2>\n<p><a href=\"https://forum.ragezone.com/f937/aura-kingdom-release-files-v7-1191652/\">[Aura Kingdom] Release Files V7 - Content 110</a></p>\n<ul>\n<li>Server Files</li>\n<li>Backup Database</li>\n<li>T Files</li>\n<li>Client Files</li>\n</ul>\n<h2 id=\"download-and-install-virtualbox\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#download-and-install-virtualbox\"><span class=\"icon icon-link\"></span></a>Download and install VirtualBox</h2>\n<h2 id=\"create-debian-9-stretch-virtualbox-vm\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#create-debian-9-stretch-virtualbox-vm\"><span class=\"icon icon-link\"></span></a>Create Debian 9 (stretch) VirtualBox VM</h2>\n<h2 id=\"update-vm-network-to-bridged\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#update-vm-network-to-bridged\"><span class=\"icon icon-link\"></span></a>Update VM network to Bridged</h2>\n<h2 id=\"run-one-click-installer-in-vm\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#run-one-click-installer-in-vm\"><span class=\"icon icon-link\"></span></a>Run one click installer in VM</h2>\n<p><a href=\"https://forum.ragezone.com/f936/opensource-one-click-server-1169800/\">[OpenSource] One click server</a></p>\n<p>Run the following commands as <code>root</code>:</p>\n<pre><code class=\"language-shell\">wget \"https://raw.githubusercontent.com/haruka98/ak_oneclick_installer/master/akinstall.sh\"\nchmod +x akinstall.sh\n./akinstall.sh\n</code></pre>\n<p>Follow the prompts and choose the recommended ones. Save the final log somewhere for future use.</p>\n<h2 id=\"fix-server-data\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#fix-server-data\"><span class=\"icon icon-link\"></span></a>Fix server data</h2>\n<p>Run the following commands as <code>root</code>:</p>\n<pre><code class=\"language-shell\"># backup old data?\nmv /root/hxsy/Data /root/hxsy/Data.old\n\n# use data from hxsy-2020-10-21.rar\ncp -r hxsy-2020-10-21.rar/hxsy/Data /root/hxsy/Data\n\n# use data from T_Files.rar\ncp -r T_Files.rar/* /root/hxsy/Data/db\n\n# dirty and simple\nchmod 0777 -R /root/hxsy\n</code></pre>\n<h2 id=\"create-user-account\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#create-user-account\"><span class=\"icon icon-link\"></span></a>Create user account</h2>\n<p><code>vi pg_hba.conf</code>, replace <code>peer</code> in the line of <code>postgres</code> with <code>md5</code>, and <code>systemctl restart postgresql</code> before proceeding.</p>\n<pre><code class=\"language-shell\"># setting PGPASSWORD environment variable before executing psql\n# which is the postgres password in the final log above\n# or you can find it in /root/hxsy/setup.ini\nexport PGPASSWORD=\n</code></pre>\n<pre><code class=\"language-sql\">; psql -U postgres -d ffaccount\nINSERT INTO accounts (id, username, password) VALUES ('1', 'test', 'test');\n\n; psql -U postgres -d ffdb1\nINSERT INTO tb_user (mid, password, pwd) VALUES ('test', 'test', '098f6bcd4621d373cade4e832627b4f6');\n</code></pre>\n<p><code>pwd</code> is the MD5 hash of <code>password</code>. Note that the server stores passwords in plaintext.</p>\n<h2 id=\"start-server\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#start-server\"><span class=\"icon icon-link\"></span></a>Start server</h2>\n<pre><code class=\"language-shell\">/root/hxsy/start\n\n# stop server\n# /root/hxsy/stop\n</code></pre>\n<h2 id=\"start-client\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#start-client\"><span class=\"icon icon-link\"></span></a>Start client</h2>\n<p>Modified <code>connect.ini</code> and <code>connects.ini</code>, replace IP addresses to yours, while ports remain unchanged.</p>\n<p>Double click the client launcher, enter username and password created above, and you are done.</p>\n<h2 id=\"gm-commands\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#gm-commands\"><span class=\"icon icon-link\"></span></a>GM commands</h2>\n<p>Run the following SQL to enable GM commands for a character.</p>\n<pre><code class=\"language-sql\">; ffdb1\nUPDATE player_characters SET privilege = 5 WHERE ...;\n</code></pre>\n<h2 id=\"fix-item-mall\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#fix-item-mall\"><span class=\"icon icon-link\"></span></a>Fix Item Mall</h2>\n<p>Take <code>itemmall</code> table data from <code>ffaccount.bak</code> of backup database and import it.</p>\n<pre><code class=\"language-shell\">psql -U postgres -d ffaccount -f itemmall.sql\n</code></pre>\n<h2 id=\"fix-fortune-bag\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#fix-fortune-bag\"><span class=\"icon icon-link\"></span></a>Fix Fortune Bag</h2>\n<p>Take <code>fortune_bag</code> table data from <code>ffaccount.bak</code> of backup database and import it.</p>\n<pre><code class=\"language-shell\">psql -U postgres -d ffaccount -f fortune_bag.sql\n</code></pre>\n<h2 id=\"fix-dress-room\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#fix-dress-room\"><span class=\"icon icon-link\"></span></a>Fix Dress Room</h2>\n<p>Take <code>dressroom</code> table data from <code>ffaccount.bak</code> of backup database and import it.</p>\n<pre><code class=\"language-shell\">psql -U postgres -d ffaccount -f dressroom.sql\n</code></pre>\n<h2 id=\"links\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#links\"><span class=\"icon icon-link\"></span></a>Links</h2>\n<ul>\n<li><a href=\"https://forum.ragezone.com/f937/aura-kingdom-released-files-1204666/\">[Aura Kingdom] Released Files</a></li>\n<li><a href=\"https://gist.github.com/haruka98\">haruka98@Gist</a></li>\n<li><a href=\"https://github.com/haruka98?tab=repositories\">haruka98@GitHub</a></li>\n</ul>\n<h2 id=\"q--a\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#q--a\"><span class=\"icon icon-link\"></span></a>Q &#x26; A</h2>\n<p>Q: Why should I use a VM?</p>\n<blockquote>\n<p>The server data is old enough that might crash if the date is not around 2013 to 2016, so the system time has to be adjusted to avoid unknown problems, which is not suitable for a real machine.</p>\n</blockquote>\n<p>Q: Why should I use Debian 9?</p>\n<blockquote>\n<p>It's said to work with Debian 11, but I keep getting Segmentation Fault so I choose Debian 9 instead.</p>\n</blockquote>\n<p>Q: Why should I use Bridged network?</p>\n<blockquote>\n<p>Bridged network can be easily accessed from local network for file transfer.</p>\n</blockquote>\n<p>Q: Why should I run the installer as root?</p>\n<blockquote>\n<p>First of all, the system time needs to be adjusted. Don't bother with best practice when you are running a VM with wrong time and old binaries, where passwords are stored in plaintext.</p>\n</blockquote>","title":"Set up RaGEZONE Aura Kingdom in 2023"}},"__N_SSG":true}